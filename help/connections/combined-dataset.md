---
title: 組み合わせイベントデータセット
description: Customer Journey Analyticsでデータセットを組み合わせて接続を作成する方法を説明します。
exl-id: 9f678225-a9f3-4134-be38-924b8de8d57f
solution: Customer Journey Analytics
feature: Connections
role: Admin
source-git-commit: 4f1299595077a1756a6ad0c4f5ef5e0247ab4973
workflow-type: tm+mt
source-wordcount: '946'
ht-degree: 33%

---


# 組み合わせイベントデータセット

接続を作成する場合、Customer Journey Analyticsは、すべてのイベントデータセットを 1 つのデータセットに組み合わせます。 この結合されたイベントデータセットは、Customer Journey Analyticsがレポートに（プロファイルデータセットやルックアップデータセットと共に）使用するものです。 1 つの接続に複数のイベントデータセットを含める場合：

* **同じスキーマパス** に基づくデータセット内のフィールドのデータは、結合されたデータセット内の 1 つの列に結合されます。
* 各データセットに対して指定されたユーザー ID 列は、（名前に関係なく **、結合されたデータセットの 1 つの列に結合され** す。 この列は、Customer Journey Analyticsで一意の人物を識別するための基礎となります。
* 行はタイムスタンプに基づいて処理されます。
* イベントはミリ秒レベルまで解決されます。

## 例

次の例をご覧ください。2 つのイベントデータセットがあり、それぞれ異なるフィールドに異なるデータが含まれています。

>[!NOTE]
>
>Adobe Experience Platformは通常、タイムスタンプを UNIX® ミリ秒単位で保存します。 この例では、読みやすくするために日付と時刻を使用しています。

| example_id | タイムスタンプ | string_color | string_animal | metric_a |
| --- | --- | --- | --- | ---: |
| user_310 | 1 月 1 日午前 7:02 （PT） | 赤 | フォックス | |
| user_310 | 1 月 1 日午前 7:04 （PT） | | | 2 |
| user_310 | 1 月 1 日午前 7:08 （PT） | 青 | | 3 |
| user_847 | 1 月 2 日午後 12:31 | | 亀 | 4 |
| user_847 | 1 月 2 日午後 12:44 | | | 2 |

| different_id | タイムスタンプ | string_color | string_shape | metric_b |
| --- | --- | --- | --- | ---: |
| user_847 | 1 月 2 日午後 12:26 | 黄色 | 円 | 8.5 |
| user_847 | 1 月 2 日午後 1:01 | 赤 | | |
| alternateid_656 | 1 月 2 日午後 8:58 | 赤 | 正方形 | 4.2 |
| alternateid_656 | 1 月 2 日午後 9:03 | | 三角形 | 3.1 |

これら 2 つのイベントデータセットを使用して接続を作成し、を識別した場合

* 最初のデータセットのユーザー ID として `example_id` を指定し、
* 2 つ目のデータセットのユーザー ID として `different_id` を指定します。

レポートには、以下の結合データセットが使用されます。

| ID | タイムスタンプ | string_color | string_animal | string_shape | metric_a | metric_b |
| --- | --- | --- | --- | --- | ---: | ---: |
| user_310 | 1 月 1 日午前 7:02 （PT） | 赤 | フォックス | | | |
| user_310 | 1 月 1 日午前 7:04 （PT） | | | | 2 | |
| user_310 | 1 月 1 日午前 7:08 （PT） | 青 | | | 3 | |
| user_847 | 1 月 2 日午後 12:26 | 黄色 | | 円 | | 8.5 |
| user_847 | 1 月 2 日午後 12:31 | | 亀 | | 4 | |
| user_847 | 1 月 2 日午後 12:44 | | | | 2 | |
| user_847 | 1 月 2 日午後 1:01 | 赤 | | | | |
| alternateid_656 | 1 月 2 日午後 8:58 | 赤 | | 正方形 | | 4.2 |
| alternateid_656 | 1 月 2 日午後 9:03 | | | 三角形 | | 3.1 |

スキーマパスの重要性を示すために、次のシナリオについて考えてみます。 最初のデータセットでは `string_color` はスキーマパス `_experience.whatever.string_color` に基づき、2 番目のデータセットではスキーマパス `_experience.somethingelse.string_color` に基づきます。 このシナリオでは、結果として得られる結合されたデータセット内で、データは 1 つの列に結合 **されません**。 代わりに、結合されたデータセット内の 2 つの `string_color` 列が結果として返されます。

| ID | タイムスタンプ | _experience.<br/> なんでも。<br/>string_color | _experience.<br/> 他の何か。<br/>string_color | string_animal | string_shape | metric_a | metric_b |
|---|---|---|---|---|---|---:|---:|
| user_310 | 1 月 1 日午前 7:02 （PT） | 赤 | | フォックス | | | |
| user_310 | 1 月 1 日午前 7:04 （PT） | | | | | 2 | |
| user_310 | 1 月 1 日午前 7:08 （PT） | 青 | | | | 3 | |
| user_847 | 1 月 2 日午後 12:26 | | 黄色 | | 円 | | 8.5 |
| user_847 | 1 月 2 日午後 12:31 | | | 亀 |  | 4 | |
| user_847 | 1 月 2 日午後 12:44 | | | | | 2 | |
| user_847 | 1 月 2 日午後 1:01 | | 赤 | | | | |
| alternateid_656 | 1 月 2 日午後 8:58 | | 赤 | | 正方形 | | 4.2 |
| alternateid_656 | 1 月 2 日午後 9:03 | | | | 三角形 | | 3.1 |

この組み合わせイベントデータセットは、レポートで使用されるデータセットです。行がどのデータセットから取得されたかは関係ありません。 Customer Journey Analyticsは、すべてのデータを同じデータセット内にあるかのように扱います。 一致するユーザー ID が両方のデータセットに表示されると、それらは同じ一意のユーザーと見なされます。 一致するユーザー ID がタイムスタンプ付きで 30 分以内に両方のデータセットに表示された場合、それらは同じセッションの一部と見なされます。 スキーマパスが同じフィールドは結合されます。

この概念はアトリビューションにも当てはまります。どのデータセットから行が取得されたかは関係ありません。アトリビューションは、すべてのイベントが 1 つデータセットから取得された場合と同じように機能します。上記の表を例として使用します。

接続に最初のテーブルのみが含まれ、2 番目のテーブルは含まれない場合、ラストタッチアトリビューションでディメンション `string_color` と `metric_a` 指標を使用してレポートを取り込むと、次のように表示されます。

| string_color | metric_a |
| --- | ---: |
| 未指定 | 6 |
| 青 | 3 |
| 赤 | 2 |

ただし、両方のテーブルを接続に含めた場合、`user_847` は両方のデータセットにあるので、属性は変更されます。2 つ目のデータセット属性 `metric_a` から「Yellow」（以前は未指定）までの行

| string_color | metric_a |
| --- | ---: |
| 黄色 | 6 |
| 青 | 3 |
| 赤 | 2 |

>[!NOTE]
>
>結合されたフィールドが接続内の 1 つのイベントデータセットのルックアップキーの場合、関連するルックアップデータセットによって、そのフィールドの **すべて** の値が強化されます。 ルックアップ関係は共有スキーマパスに関連付けられているので、行がどのイベントデータセットから取得されたかは関係ありません。

## クロスチャネル分析

データセットの組み合わせの次のレベルは、共通の識別子（ユーザー ID）に基づいて、異なるチャネルのデータセットが組み合わされるクロスチャネル分析です。 クロスチャネル分析では、データセットのユーザー ID のキーを変更できるステッチ機能を活用できます。これにより、データセットが適切に更新され、複数のデータセットをシームレスに組み合わせることができます。 ステッチでは、認証済みセッションと未認証セッションの両方からのユーザーデータを調べて、ステッチされた ID を生成します。

クロスチャネル分析を使用すると、次のような質問に答えることができます。

* 1 つのチャネルでエクスペリエンスを始め、別のチャネルでエクスペリエンスを終える人は何人いるか。
* 何人のユーザーがブランドとやり取りしているか。ユーザーが使用しているデバイスの台数および種類は何か。それらはどのように重なっているか。
* ユーザーは、どのようにしてモバイルデバイスでタスクを開始し、後でデスクトップ PC に移行してタスクを完了するか。あるデバイスに到達した Campaign のクリックスルーは、別の場所でのコンバージョンにつながりますか？
* クロスデバイスジャーニーを検討すると、キャンペーンの有効性に関する理解はどのように変わりますか？ ファネル分析はどのように変化するか。
* ユーザーがあるデバイスから別のデバイスへと移動する際の、最も一般的なパスは何か。どこからドロップアウトするか。成功した場所はどこか。
* 複数のデバイスを所有するユーザーの動作は、単一のデバイスを所有するユーザーとはどのように異なるか。


クロスチャネル分析について詳しくは、次の特定のユースケースを参照してください。

* [クロスチャネル分析](../use-cases/cross-channel/cross-channel.md)

ステッチ機能の詳細については、次を参照してください。

* [ステッチの概要](/help/stitching/overview.md)
* [よくある質問](/help/stitching/faq.md)

