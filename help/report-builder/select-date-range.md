---
title: Customer Journey AnalyticsでReport Builderの日付範囲を選択する方法
description: Customer Journey AnalyticsのReport Builderでカレンダー、相対日付およびカスタム式を使用する方法について説明します
role: User
feature: Report Builder
type: Documentation
exl-id: 7252214f-a7d6-451b-99c9-d39e8e47120b
solution: Customer Journey Analytics
source-git-commit: 9794779894fbecb433c16d108c555c5f81a4b491
workflow-type: tm+mt
source-wordcount: '867'
ht-degree: 49%

---

# 日付範囲の選択

既存のデータブロックの日付範囲を変更するには：

- **[!UICONTROL データブロックの編集]** を選択する
- **[!UICONTROL クイック編集]** の **[!UICONTROL 日付範囲]** リンクを選択します。

データブロックの日付範囲を変更するには、次のオプションを使用します。

## カレンダー

**[!UICONTROL カレンダー]** オプションでは、次のオプションを使用して、固定日付または相対日付を作成できます。

### 日付範囲

日付範囲フィールドには、データブロックリクエストに応じた現在の日付範囲が表示されます。 日付を直接入力するか、![ カレンダー ](/help/assets/icons/Calendar.svg) を使用して日付範囲を指定できます。

![ 日付範囲カレンダー ](assets/date-range-calendar.png){zoomable="yes"}

### プリセット

プリセット ドロップダウンメニューを使用して、プリセットを選択します。 また、テキストを入力してプリセットを検索することもできます。

![ 日付範囲のプリセット ](assets/date-range-presets.png){zoomable="yes"}

プリセットドロップダウンメニューには、標準のプリセット日付範囲と、保存したデータビューまたは共有したデータビューの日付範囲コンポーネントが含まれています。

### 相対日付

相対日付を定義する手順は、次のとおりです。

![ 相対日付 ](assets/date-range-rolling-date.png){zoomable="yes"}

1. **[!UICONTROL 相対日付を使用]** を選択して、相対日付の定義のロジックを定義します。 角括弧で囲まれたテキスト（例：**[!UICONTROL 固定開始 – 日周期]**）を選択して、パネルを拡張し、**[!UICONTROL 開始]** と **[!UICONTROL 終了]** の詳細を指定できます。

1. 「**[!UICONTROL 開始日]**」、「**[!UICONTROL 終了日]**」または「**[!UICONTROL 固定日]**」を選択します。

   - 「**[!UICONTROL 開始日]**」または「**[!UICONTROL 終了日]**」を選択すると、完全な式を作成できます。例：**[!UICONTROL End of]** **[!UICONTROL current year]** **[!UICONTROL plus]** `1` **[!UICONTROL day]**。式の個々の部分に適した値を選択します。

      - 現在の値を選択します。例えば、**[!UICONTROL 現在の年]** です。
      - オプションの追加計算の値を選択します。 例：**[!UICONTROL plus]**。
      - 追加の計算を指定した場合は、値を指定します。例：`1`。
      - 追加の計算を指定した場合は、計算に使用する期間を選択します。例えば、**[!UICONTROL day]** と指定します。

   - **[!UICONTROL 固定日]** を選択した場合は、固定日を指定するか、ピッカーを使用して日を選択します。

1. 相対日付計算の詳細を非表示にするには、「**[!UICONTROL 非表示]**」を選択します。


### カスタム式

「カスタム式」オプションを使用すると、カスタム式を作成するか、数式を入力して日付範囲を変更できます。

![ 日付範囲のカスタム式 ](assets/date-range-custom-expression.png){zoomable="yes"}

1. 「**[!UICONTROL 相対日付を使用]**」を選択します。

1. 「**[!UICONTROL カスタム式の使用]**」を選択します。

   **[!UICONTROL カスタム式の使用]** を選択すると、標準の相対日付範囲コントロールは無効になります。

1. [ カスタム式 ](#create-a-custom-expression) を入力します。

1. **[!UICONTROL 日付プレビュー]** を使用して、結果の日付範囲を確認します。

#### カスタム式の作成

1. [ 日付参照 ](#date-references) を入力します。

1. オプションの [ 日付演算子 ](#date-operators) を追加して、日付を過去または未来に移動します。

`tm-11m-1d` など、複数の演算子を含むカスタム式を入力できます。

#### 日付参照

次のテーブルに、日付参照の例を示します。

| 日付参照 | タイプ | 説明 |
|----------------|--------------|----------------------------|
| `1/1/10` | 静的な日付 | ISO 日付形式で入力 |
| `td` | 相対日付 | 本日の開始時 |
| `tw` | 相対日付 | 今週の開始日 |
| `tm` | 相対日付 | 今月の開始日 |
| `tq` | 相対日付 | 今四半期の開始日 |
| `ty` | 相対日付 | 今年の開始日 |

#### 日付演算子

次のテーブルに、日付演算子の例を示します。

| 日付演算子 | 単位 | 説明 |
|----------------|---------|--------------------|
| `+6d` | 日 | 日付参照に 6 日間を追加 |
| `+1w` | 週 | 日付参照に 1 週間を追加 |
| `-2m` | 月 | 日付参照から 2 か月を減算 |
| `-4q` | 四半期 | 日付参照から 4 四半期を減算 |
| -`1y` | 年 | 日付参照から 1 年を減算 |

#### 日付式

次のテーブルに、日付式の例を示します。

| 日付式 | 意味 |
|-----------------|--------------------------------------|
| `td` | Today |
| `td-1w` | 先週の最初の日 |
| `tm-1d` | 先月の最終日 |
| `td-52w` | 52 週間前の同じ曜日 |
| `tm-11m-1d` | 昨年同月の最終日 |
| `"2020-09-06"` | 2020 年 9 月 9 日（PT） |



## セルからの日付範囲

日付範囲は、ワークシートのセルで指定できます。「**[!UICONTROL セルからの日付範囲]**」オプションを使用して、選択したセルからデータブロックの開始日と終了日を選択します。 「**[!UICONTROL セルから]**」オプションを選択すると、パネルに **[!UICONTROL 開始]** フィールドと **[!UICONTROL 終了]** フィールドが表示されます。これらのフィールドで、セルの場所を入力したり、![DataBlockSelector](/help/assets/icons/DataBlockSelector.svg) を使用して現在選択されているセルを選択したりできます。

![ セル シート 1!H4 からシート 1!I4 を選択 ](./assets/date-range-from-cell.png){zoomable="yes"}


## 今日を除外

「**[!UICONTROL 今日を除外]**」を選択して、選択した日付範囲から今日を除外します。 現在の日付は、日付範囲（カレンダー、相対日付またはカスタム式）を定義するために使用されるすべてのモードから除外されます。


## 有効な日付範囲

次のリストは、有効な日付範囲の形式を示しています。

- 開始日と終了日は、「YYYY-MM-DD」の形式で指定する必要があります。

- 開始日は、終了日以前にする必要があります。どちらの日付も将来の日付に設定できます。

- 相対な日付を使用する場合は、開始日を今日または過去の日付にする必要があります。**[!UICONTROL 今日を除外]** を選択した場合、開始日は過去にする必要があります。

- 将来の静的な日付範囲セットを作成できます。例えば、来週予定されているマーケティングキャンペーンのローンチに、将来の日付を設定する必要が出ることがあります。このオプションを選択すると、事前にキャンペーンを監視するワークブックが作成されます。

## 日付範囲の変更

既存のデータブロックの日付範囲を編集できます。

1. データブロックのセルを選択します。

- **[!UICONTROL コマンド]** パネルの「**[!UICONTROL データブロックを編集]**」を選択するか、
- **[!UICONTROL クイック編集]** パネルの **[!UICONTROL 日付範囲]** リンクを選択します。

1. 使用可能な任意の日付選択オプションを使用して日付範囲を変更します。

1. 「**[!UICONTROL 適用]**」を選択します。

Report Builder は、選択範囲内のすべてのデータブロックに新しい日付範囲を適用します。
