---
title: 部分文字列コンポーネント設定
description: 文字列のサブセットをディメンション項目として使用します。
solution: Customer Journey Analytics
feature: Data Views
exl-id: a763027e-68f7-4f0a-8082-85db5283c8e3
role: Admin
source-git-commit: e4e0c3cf2e865454837df6626c3b1b09f119f07f
workflow-type: tm+mt
source-wordcount: '921'
ht-degree: 94%

---

# 部分文字列コンポーネント設定 {#substring-component-settings}

<!-- markdownlint-disable MD034 -->

>[!CONTEXTUALHELP]
>id="dataview_component_dimension_substring"
>title="部分文字列"
>abstract="ルールや正規表現を使用して文字列の一部を抽出します。"

<!-- markdownlint-enable MD034 -->


[!UICONTROL 部分文字列]コンポーネント設定を使用すると、複数文字列の操作メソッドを実行して、レポートで目的のディメンション項目を取得できます。

![部分文字列設定](../assets/substring-settings.png)

[!UICONTROL 部分文字列]は、ディメンションでのみ使用でき、適用対象となるデータに遡って適用されます。フィルタリングや他の分析操作が適用される前に発生する即時のデータ変換です。

## 左／右から

文字列の先頭または末尾に対する位置に基づいて、文字列の一部を取ります。**[!UICONTROL 左から]** および **[!UICONTROL 右から]** メソッドには、**[!UICONTROL 開始]** （出力の開始位置）と **[!UICONTROL 終了]** （出力の終了位置）という 2 つのドロップダウンリストが用意されています。

* **[!UICONTROL 文字列の開始]**： 文字列の開始。
* **[!UICONTROL 文字列の終了]**：文字列の終了。
* **[!UICONTROL 位置]**：メソッドに応じて左または右からの文字列の静的な数値。
* **[!UICONTROL 文字列]**：文字列の先頭または末尾を示す文字または文字のシーケンスに一致します。このドロップダウンリストには、追加のオプションも表示されます。
   * **[!UICONTROL 一致]**：一致する文字列。入力がこのフィールドと一致しない場合、[値オプションなし](no-value-options.md)が適用されます。
   * **[!UICONTROL インデックス]**：**[!UICONTROL 一致]**&#x200B;条件は、文字列の中に複数回存在させることができます。この整数は、メソッドに応じて、出力を開始または終了するための一致を決定します。例えば、`1` のインデックスは、最初の一致を表します。インデックスが使用可能な一致の数よりも大きい場合、[値オプションなし](no-value-options.md)が適用されます。
   * **[!UICONTROL 文字列を含める]**：有効な場合に、出力に&#x200B;**[!UICONTROL 一致]**&#x200B;文字列を含めるチェックボックス。
* **[!UICONTROL 長さ]**：出力の開始位置の後に含める文字数を指定する整数。**[!UICONTROL 終了]** ドロップダウンリストでのみ使用できます。

## 区切り

区切り文字を使用して複数の文字列値に分離するフィールドに、このメソッドを使用します。出力として使用するための個別の要素を抽出するか、文字列をオブジェクト配列スキーマ要素に変換することができます。

* **[!UICONTROL 条件]**：区切られた値のリストの処理方法。
   * **[!UICONTROL 左から]**：区切られたリストの先頭から開始して、前にカウントします。
   * **[!UICONTROL 右から]**：区切られたリストの末尾から開始して、後ろにカウントします。
   * **[!UICONTROL 配列に変換]**：このディメンションをオブジェクト配列スキーマ要素であるかのように扱います。
* **[!UICONTROL 区切り文字]**：フィールドが使用する区切り文字。
* **[!UICONTROL インデックス]**：条件が「左から」／「右から」の場合にのみ表示されます。配列内にある場合のような要素番号です。例えば、文字列入力が「`"Fox,Turtle,Rabbit,Wolf"`」でインデックスが 3 の場合、出力は「`"Rabbit"`」です。インデックスが区切られた要素の数よりも大きい場合、[値オプションなし](no-value-options.md)が適用されます。

## URL 解析

URL を含むフィールドで使用します。URL の例 `https://example.com/store/index.html?cid=campaign#cart` を使用すると、次のオプションが使用できます。

* **[!UICONTROL プロトコルを取得]**：URL のプロトコルを取得します。例：`"https://"`。
* **[!UICONTROL ホストを取得]**：URL のホストを取得します。例：`"example.com"`。
* **[!UICONTROL パスを取得]**：URL のパスを取得します。例：`"store/index.html"`。
* **[!UICONTROL クエリ文字列値を取得]**：単一のクエリ文字列から値を取得します。「**[!UICONTROL クエリキー]**」フィールドに目的のクエリ文字列パラメーターを配置します。前述の URL が `"cid"` クエリキーと共に使用される場合、出力は「`"campaign"`」です。
* **[!UICONTROL ハッシュ値を取得]**：URL のハッシュ値を取得します。例：`"cart"`。

入力が有効な URL でない場合や目的の URL コンポーネントが存在しない場合は、[値オプションなし](no-value-options.md)が適用されます。

## トリミング

文字列から空白文字や特殊文字をトリミングします。

* **[!UICONTROL 空白をトリミング]**：有効な場合に、文字列の先頭と末尾のすべての空白文字を削除するチェックボックス。
* **[!UICONTROL 特殊文字をトリミング]**：有効な場合に、**[!UICONTROL 特殊文字]**&#x200B;入力フィールドを表示するチェックボックス。このフィールド内のすべての文字は、出力から削除されます。マルチバイト文字は、サポートされません。

## 正規表現

ディメンションに正規表現を適用して、目的の値を取得します。

* **[!UICONTROL 正規表現]**：正規表現式。
* **[!UICONTROL 出力形式]**：テキストを追加したり、正規表現サブグループ出力を並べ替えたりできる、オプションのフィールド。このフィールドが空の場合、文字列出力は、評価された正規表現式です。
* **[!UICONTROL 大文字と小文字を区別]**：有効な場合に、正規表現で大文字と小文字を区別することを強制するチェックボックス。

Customer Journey Analyticsでは、Perl 正規表現構文のサブセットを使用します。 入力が正規表現に一致せず、**[!UICONTROL 出力形式]**&#x200B;が空の場合、[値オプションなし](no-value-options.md)が適用されます。次の式がサポートされています。

| 式 | 説明 |
| --- | --- |
| `a` | 単一の文字 `a`。 |
| `a\|b` | 単一の文字 `a` または `b`。 |
| `[abc]` | 単一の文字 `a`、`b` または `c`。 |
| `[^abc]` | `a`、`b` または `c` を除く任意の単一の文字。 |
| `[a-z]` | `a` ～ `z` の範囲の任意の単一の文字。 |
| `[a-zA-Z0-9]` | `a` ～ `z`、`A` ～ `Z` または数字 `0` ～ `9` の範囲の任意の単一の文字。 |
| `^` | 行の先頭に一致します。 |
| `$` | 行の末尾に一致します。 |
| `\A` | 文字列の開始。 |
| `\z` | 文字列の終わり。 |
| `.` | 任意の文字に一致します。 |
| `\s` | 空白文字。 |
| `\S` | 空白以外の文字。 |
| `\d` | 数字。 |
| `\D` | 数字以外。 |
| `\w` | 文字、数字、アンダースコア。 |
| `\W` | 単語以外の文字。 |
| `\b` | 単語の境界。 |
| `\B` | 単語の境界以外の文字。 |
| `\<` | 単語の始まり。 |
| `\>` | 単語の終わり。 |
| `(...)` | 囲まれている内容をすべてキャプチャ。 |
| `(?:...)` | マーキングのないキャプチャ。出力文字列で一致を参照できないようにします。 |
| `a?` | 0 または 1 個の `a`。 |
| `a*` | 0 個以上の `a`。 |
| `a+` | 1 個以上の `a`。 |
| `a{3}` | 厳密に 3 個の `a`。 |
| `a{3,}` | 3 個以上の `a`。 |
| `a{3,6}` | 3 ～ 6 個の `a`。 |

出力プレースホルダーもサポートされます。**[!UICONTROL 出力形式]**&#x200B;では、目的の文字列出力を実現するために、これらのシーケンスを何回でも、どのような順序でも使用できます。

| 出力プレースホルダーシーケンス | 説明 |
| --- | --- |
| `$&` | 式全体に一致したものを出力します。 |
| `$n` | n 番目のサブ式に一致したものを出力します。例えば、`$1` は、最初のサブ式を出力します。 |
| ``$` `` | 最後に見つかった一致の終わり（前に一致が見つからなかった場合は、テキストの始まり）から、現在の一致の始まりまでのテキストを出力します。 |
| `$+` | 正規表現で最後にマークされたサブ式に一致するものを出力します。 |
| `$$` | 文字列文字 `"$"` を出力します。 |

{style="table-layout:auto"}
